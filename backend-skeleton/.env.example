# KLINEO Backend Environment Variables
# Copy this file to .env for local development
# DO NOT commit .env to Git (it's in .gitignore)

# Server
PORT=3000
NODE_ENV=development

# Frontend URL (for CORS)
FRONTEND_URL=https://klineo.vercel.app

# Supabase (Backend - SERVICE_ROLE only; never use anon key on backend)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# SUPABASE_ANON_KEY is frontend-only (VITE_SUPABASE_ANON_KEY). Do NOT add to Railway.

# Admin fallback: comma-separated emails treated as admin when profile.role is not admin
ADMIN_EMAILS=your-admin@example.com

# Optional: Admin API rate limit (requests per 15 min, default 500). Increase if 429 on Discounts tab.
# ADMIN_RATE_LIMIT_MAX=1000

# Encryption Key (for encrypting exchange API credentials)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Or: openssl rand -hex 32
# Must be exactly 64 characters (32 bytes in hex)
ENCRYPTION_KEY=your-64-character-hex-key-here

# Feature flags (required on Railway; set to true or false)
ENABLE_MANUAL_PAYMENTS=true
ENABLE_STRATEGY_RUNNER=true

# Runner cron (required only if ENABLE_STRATEGY_RUNNER=true)
RUNNER_CRON_SECRET=your-strong-random-string

# REQUIRED if you see "Service unavailable from a restricted location" on Test Spot:
# Binance blocks requests from many cloud regions (e.g. US, EU). Set this to an HTTP(S) proxy
# in an allowed region (e.g. Singapore, Hong Kong). See TROUBLESHOOT_BINANCE_RESTRICTED.md.
# Example: BINANCE_HTTPS_PROXY=http://proxy.example.com:8080
# BINANCE_HTTP_PROXY=
# BINANCE_HTTPS_PROXY=
# Optional: Binance base URLs (if one endpoint is blocked, try another per Binance docs).
# Spot: https://api.binance.com | https://api-gcp.binance.com | https://api1.binance.com ...
# Futures prod: https://fapi.binance.com
# Futures testnet (USDT-M): https://demo-fapi.binance.com (default)
# BINANCE_SPOT_BASE_URL=
# BINANCE_FUTURES_BASE_URL=
# BINANCE_FUTURES_TESTNET_URL=

# Master Trader application copy — email a copy of each submission to this address
# Default: klineoxyz@gmail.com (used if MASTER_TRADER_COPY_TO_EMAIL is not set)
# MASTER_TRADER_COPY_TO_EMAIL=klineoxyz@gmail.com

# Email sending (Resend). Required for Master Trader copy emails.
# Get API key at https://resend.com — then set EMAIL_FROM to a verified domain (e.g. KLINEO <notifications@yourdomain.com>)
# RESEND_API_KEY=re_xxxx
# EMAIL_FROM=KLINEO <notifications@yourdomain.com>

# Optional: CoinPayments (only if referenced in code)
# COINPAYMENTS_CLIENT_ID=
# COINPAYMENTS_CLIENT_SECRET=
# COINPAYMENTS_IPN_SECRET=

# Required on Railway: SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, ENCRYPTION_KEY, FRONTEND_URL, NODE_ENV, ADMIN_EMAILS, ENABLE_MANUAL_PAYMENTS, ENABLE_STRATEGY_RUNNER, RUNNER_CRON_SECRET (if runner enabled)
# SUPABASE_ANON_KEY is frontend-only and must NOT be added to Railway.
